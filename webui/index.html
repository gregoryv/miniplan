<!doctype html>

<html>
  
<head><title>miniplan</title>
  <link rel="stylesheet" type="text/css" href="/static/theme.css" />
  <script src="/static/tools.js"></script>
</head>

<body id="body">

<h1>Miniplan</h1>

{{range .Changes}}

<form method="POST" id="insertForm{{.Ref}}">
      <input type=hidden name=submit value=add>
      <input type=hidden name=priority value="{{.InsertPrio}}" >
</form>

<form method="POST" id="deleteForm{{.Ref}}" onsubmit="return confirm('Are you sure? there is no undo!');">
      <input type=hidden name="uuid" value="{{.Ref}}">
      <input type=hidden name=submit value=delete>
</form>

<div class="row insert">
  <div class="mid"><hr class="separator"></div>
  <div class="right">
      <button type=submit form="insertForm{{.Ref}}">+</button>    
  </div>
</div>


<div class="row entry">

  <div class="left">    
    <a href="#{{.Ref}}" class="idref">#</a>
    <a name="{{.Ref}}">{{.Ref}}</a>
  </div>

  <div class="mid">
    <form method="POST" class="change" id="f{{.Ref}}">
      <input type=hidden name="uuid" value="{{.Ref}}">
      <input type=text name="title" value="{{.Title}}" /><br>
      <textarea rows="{{.LineHeight}}" name="description">{{.Description}}</textarea>
      
      <input type=number min=1 name=priority value="{{.Priority}}"/>
      <input type=hidden name=submit value=update>
      <button type=submit form="deleteForm{{.Ref}}" class="delete btn">Delete</button>
      <button type=submit form="f{{.Ref}}">Save</button>          
    </form>
  </div>

  <div class="right"></div>

</div>


</div>
{{end}}

<form method="POST">
  <input type=hidden name=submit value=add>
  <input type=hidden name=priority value="{{.LastPriority}}" >
</form>

<div class="row insert">
  <div class="mid"><hr class="separator"></div>
  <div class="right">
    <button type=submit form="lastInsertForm">+</button>
  </div>
</div>

</body></html>
